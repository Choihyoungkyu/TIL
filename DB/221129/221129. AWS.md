# 221129. AWS



#### 클라우드

- IT 자원을 인터넷을 연결하여 빌려쓴다!

- 프로그래밍 방식으로 인프라를 관리
- 유연한 인프라 -> 사용하는 만큼 비용을 내는 구조



#### AWS (Amazon Web Services)

- 컴퓨팅, 스토리지, 데이터베이스와 같은 인프라 기술부터 기계 학습 및 인공지능, 데이터 레이크 및 분석, 사물 인터넷을 IT 서비스로 제공



#### AWS를 조작하는 방법

1. **AWS SDK**
   - 선호하는 개발 언어 또는 플랫폼으로 AWS 서비스에 액세스하고 관리
2. **AWS CLI**
   - Linux, macOS 또는 Windows 명령 프로그램에서 실행될 수 있는 유틸리티 묶음을 제
3. **Management Console**
   - 사용이 간편
   - GUI라 보기가 쉽다
   - 사용자 지정 비밀번호로 로그인 할 수 있다



#### AWS 글로벌 인프라

- **AWS 리전**
  - 최소 3개의 가용영역으로 구서오디어 있는 AWS 인프라 단위
  - 현재 29개의 리전 보유
- **AWS 가용영역**
  - AWS의 데이터센터 모음
  - 다른 가용영역 간의 장애로부터 자유로움

- **AWS 엣지 로케이션**
  - 리전과 비교했을 때 최종 사용자와 더 가까이 존재하는 글로벌 인프라
  - 보안, 가용성, 비용 효율성, 속도 면에서 향상된 성능

---



## AWS 기초 서비스

#### Amazon Elastic Compute Cloud (EC2)

- 컴퓨팅 파워의 규모를 자유자재로 변경할 수 있는 컴퓨팅 서비스
- 새로운 **서버 인스턴스** 확보 및 부팅 시간을 단축
- Virtual Machine
- Linux 또는 Windows, Ubuntu 등 다양한 OS 지원
- 사용하는 용량만큼 비용 지불

#### 

#### Simple Storage Service (S3)

- 최고의 확장성, 데이터 가용성, 성능을 갖추고 있는 스토리지 서비스
- 백업 및 복원, 정적 웹사이트 배포, 빅데이터 분석 등 다양한 사용 사례에서 원하는 양의 데이터를 저장하고 사용

- 객체
  - 1개의 데이터와 키, 메타 데이터를 합친 용어
  - 객체마다 고유한 키 값을 가지고, URL을 가지고 있어서 웹으로 호출이 가능
    - ex) http://ssafy123.s3.amazonaws.com/index.html
  - 웹 기반의 객체 스토리지
  - 내구성 완전 좋음 (객체가 손상될 일이 없다)
  - 사용하는만큼 비용이 발생
- 특징
  - 완전 관리형 서비스로 높은 가용성과 고도의 확장성을 가지고 있다
  - 이벤트 트리거 기능 제공
  - 객체 잠금 기능으로 조직 및 규정 준수 요구사항에 맞게 데이터 관리 기능
- 버전관리
  - S3 버킷의 객체들에 대해서 버저닝 기능을 활성화하면 파일을 삭제 후복원할 수 있고, 이전 버전으로 되돌릴 수 있다.
  - 다만, 버저닝 되는 객체들도 S3에 누적으로 저장되기 때문에 비용이 발생



#### IP 주소와 IPv4

- IP 주소 : 인터넷에서 서로 통신하기 위해 부여하는 고유한 주소
  - 두 가지 종류 : IPv4, IPv6
  - 두 가지 종류 : 사설 IP, 공인 IP
- IPv4
  - 총 32비트로 구성: 2^32 = 4,294,967,296개
  - 약 6억개는 예약되어 있음
  - 인터넷의 폭발적인 성장으로 인해 가용가능한 IP 주소가 거의 고갈
  - 128비트를 사용하는 IPv6가 새로운 표준으로 제안



#### CIDR (Classless Inter Domain Routing)

- VLSM (Variable Length Subnet Mask)
- Network prefix와 Host id로 구성
- 서브넷 마스크를 /X 노테이션을 사용해 표현
  - X : 마스크 비트 수
  - 예) 255.255.0.0 -> /16, 255.255.255.0 -> /24
- 한 블록 안에서 첫번째, 마지막 IP는 예약되어 있어 사용 불가
  - 첫번째 IP는 네트워크 자체를 가르키는 IP (호스트 id 비트가 모두 0)
  - 마지막 IP는 Broadcast IP
- AWS에서는 총 5개의 Address를 예약
  - 0 : 네트워크 어드레스, 1 : VPC Router, 2 : DNS, 3 : Future use, 마지막 : Broadcast



#### VPC (Virtual Private Cloud)

- VPC 안에서 서브넷 (프라이빗, 퍼블릭)
- 서브넷과 가용영역
- VPC 안에서의 보안
- 인터넷 액세스를 허용 여부 (인터넷 게이트웨이)



#### Internet Gateway

- 수평 확장되고 가용성이 높은 중복 VPC 구성 요소로, VPC와 인터넷 간에 통신을 하게 해줌
- 인터넷 게이트웨이를 생성하는 경우 비용이 별도로 발생하지는 않으나, 외부와 인터넷 통신을 원하지 않는 경우 사용하지 않을 수 있음



#### VPC 보안

- 보안그룹
  - EC2 혹은 다른 AWS 리소스에 도달하고 나갈 수 있는 트래픽을 제어
  - 포트넘버 / 프로토콜 / 소스 IP 주소 등을 활용해 트래픽을 제어

- NACL (Network Access Control List)
  - 네트워크 ACL은 1개 이상의 서브넷 내부와 외부의 트래픽을 제어하기 위한 방화벽



---

## AWS EC2 인스턴스 사용 방법

#### 리눅스 (Linux)

- 컴퓨터 운영 체제의 하나이며, 그 커널을 뜻하기도 함
- 자유 소프트웨어와 오픈 소스 개발의 가장 유명한 표본
- 다중 사용자, 다중 작업(멀티태스킹), 다중 스레드를 지원하는 네트워크 운영 체제(NOS)

- 리눅스 커널과 GNU 프로젝트의 라이브러리와 도구들이 포함된, 전체 운영 체제(GNU/리눅스)를 나타내는 말

  ```
  . : 현재 폴더
  .. : 부모 폴더
  / : 루트
  ~ : 사용자 폴더
  mkdir: 폴더만들기 / rm : 파일지우기 / rmdir: 폴더지우기 / rm -r : recursive하게 지우기 / clear: 터미널 청소 / sudo : 관리자권한 / 설치하기: sudo yum install -y httpd / history: 명령어 입력 히스토리
  ```

- 구글 검색 시 `site:zetawiki.com` 붙이면 명령어에 대한 자세한 설명 나옴



#### AMI

- 인스턴스를 시작하는데 필요한 정보를 제공하는 AWS에서 유지, 관리되는 이미지 (운영체제, 애플리케이션, 라이브러리 등을 포함)
- AWS 계정을 제어하는 시작 권한
- 시작될 때 연결할 볼륨을 지정하는 블록 디바이스 매핑
- 똑같은 이미지로 수백 수천 개의 인스턴스를 생성





